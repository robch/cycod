class: slash-commands
tag: cycod
tests:
- name: file_command_test
  run: cycod --input "/file README.md" --input exit --openai-api-key fake --use-openai
  workingDirectory: testfiles
  expect-regex: |
    ^\r?$\n
    ^User: /file README\.md\r?$\n
    ^\r?$\n
    ^user-function: /file => \.\.\.\r?$\n
    ^user-function: /file => ## README\.md\r?$\n
    ^\r?$\n
    ^```markdown\r?$\n
    ^# README\.md\r?$\n
    ^\r?$\n
    ^This is an example README\.md\r?$\n
    ^\r?$\n
    ^```\r?$\n
    ^\r?$\n
    ^User: \r?$\n
    ^User: exit\r?$\n

- name: files_command_test
  run: cycod --input "/files README.md" --input exit --openai-api-key fake --use-openai
  workingDirectory: testfiles
  expect-regex: |
    ^\r?\n
    ^User: /files README\.md\r?$\n
    ^\r?$\n
    ^user-function: /files => \.\.\.\r?$\n
    ^user-function: /files => ## README\.md\r?$\n
    ^\r?$\n
    ^```markdown\r?$\n
    ^# README\.md\r?$\n
    ^\r?$\n
    ^This is an example README\.md\r?$\n
    ^\r?$\n
    ^```\r?$\n
    ^\r?$\n
    ^User: \r?$\n
    ^User: exit\r?$\n

- name: find_command_test
  run: cycod --input "/find README.md" --input exit --openai-api-key fake --use-openai
  workingDirectory: testfiles
  expect-regex: |
    ^\r?\n
    ^User: /find README\.md\r?$\n
    ^\r?$\n
    ^user-function: /find => \.\.\.\r?$\n
    ^user-function: /find => ## README\.md\r?$\n
    ^\r?$\n
    ^```markdown\r?$\n
    ^# README\.md\r?$\n
    ^\r?$\n
    ^This is an example README\.md\r?$\n
    ^\r?$\n
    ^```\r?$\n
    ^\r?$\n
    ^User: \r?$\n
    ^User: exit\r?$\n