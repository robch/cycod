# Test log file template variables
# Tests various template variable formats: {ProgramName}, {Time}, {TimeStamp} and case variations

class: log-template-variable-tests
tags: [cycod, logger]
tests:

- name: Test ProgramName template variable (uppercase P) for cycod
  parallelize: false
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-ProgramName-uppercase
  steps:
  - name: Run cycod with uppercase {ProgramName} template and verify
    bash: |
      cycod version --log "test-{ProgramName}-log.log"
      cycodmd test-cycod-log.log exception-test-cycod-log.log
    expect-regex: |
      Version:
      test-cycod-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-cycod-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-cycod-log\.log

  - name: Clean up ProgramName test log files
    bash: |
      rm -f test-cycod-log.log exception-test-cycod-log.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test programName template variable (lowercase p) for cycod
  parallelize: false
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-programName-lowercase
  steps:
  - name: Run cycod with lowercase {programName} template and verify
    bash: |
      cycod version --log "test-{programName}-log.log"
      cycodmd test-cycod-log.log exception-test-cycod-log.log
    expect-regex: |
      Version:
      test-cycod-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-cycod-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-cycod-log\.log

  - name: Clean up lowercase programName test log files
    bash: |
      rm -f test-cycod-log.log exception-test-cycod-log.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test Time template variable (uppercase T) for cycod
  parallelize: false
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-Time-uppercase
  steps:
  - name: Run cycod with uppercase {Time} template and verify
    bash: |
      cycod version --log "test-{Time}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up uppercase Time test log files
    bash: |
      rm -f test-*-log.log exception-test-*-log.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test time template variable (lowercase t) for cycod
  parallelize: false
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-time-lowercase
  steps:
  - name: Run cycod with lowercase {time} template and verify
    bash: |
      cycod version --log "test-{time}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up lowercase time test log files
    bash: |
      rm -f test-*-log.log exception-test-*-log.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test TimeStamp template variable (uppercase T and S) for cycod
  parallelize: false
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-TimeStamp-uppercase
  steps:
  - name: Run cycod with uppercase {TimeStamp} template and verify
    bash: |
      cycod version --log "test-{TimeStamp}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up uppercase TimeStamp test log files
    bash: |
      rm -f test-*-log.log exception-test-*-log.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test timestamp template variable (lowercase t and s) for cycod
  parallelize: false
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-timestamp-lowercase
  steps:
  - name: Run cycod with lowercase {timestamp} template and verify
    bash: |
      cycod version --log "test-{timestamp}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up lowercase timestamp test log files
    bash: |
      rm -f test-*-log.log exception-test-*-log.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test combined template variables for cycod
  workingDirectory: ../../../testresults/cycod/logger/log-template-variable-tests/test-combined-variables
  steps:
  - name: Run cycod with multiple template variables and verify
    bash: |
      cycod version --log "test-{ProgramName}-{time}-combined.log"
      cycodmd test-cycod-*-combined.log exception-test-cycod-*-combined.log
    expect-regex: |
      Version:
      test-cycod-[0-9]+-combined\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-cycod-[0-9]+-combined\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-cycod-.*-combined\.log

  - name: Clean up combined variables test log files
    bash: |
      rm -f test-cycod-*-combined.log exception-test-cycod-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed
