# Test log file template variables
# Tests various template variable formats: {ProgramName}, {Time}, {TimeStamp} and case variations

class: log-template-variable-tests
tag: cycodt
tests:

- name: Test ProgramName template variable (uppercase P) for cycodt
  steps:
  - name: Run cycodt with {ProgramName} template and verify
    bash: |
      cycodt version --log "test-{ProgramName}-log.log"
      cycodmd test-cycodt-log.log exception-test-cycodt-log.log
    expect-regex: |
      Version:
      test-cycodt-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-cycodt-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-cycodt-log\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test programName template variable (lowercase p) for cycodt
  steps:
  - name: Run cycodt with {programName} template and verify
    bash: |
      cycodt version --log "test-{programName}-log.log"
      cycodmd test-cycodt-log.log exception-test-cycodt-log.log
    expect-regex: |
      Version:
      test-cycodt-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-cycodt-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-cycodt-log\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test Time template variable (uppercase T) for cycodt
  steps:
  - name: Run cycodt with {Time} template and verify
    bash: |
      cycodt version --log "test-{Time}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test time template variable (lowercase t) for cycodt
  steps:
  - name: Run cycodt with {time} template and verify
    bash: |
      cycodt version --log "test-{time}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test TimeStamp template variable (uppercase T and S) for cycodt
  steps:
  - name: Run cycodt with {TimeStamp} template and verify
    bash: |
      cycodt version --log "test-{TimeStamp}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test timestamp template variable (lowercase t and s) for cycodt
  steps:
  - name: Run cycodt with {timestamp} template and verify
    bash: |
      cycodt version --log "test-{timestamp}-log.log"
      cycodmd test-*-log.log exception-test-*-log.log
    expect-regex: |
      Version:
      test-[0-9]+-log\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-[0-9]+-log\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-.*-log\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed

- name: Test combined template variables for cycodt
  steps:
  - name: Run cycodt with multiple template variables and verify
    bash: |
      cycodt version --log "test-{ProgramName}-{time}-combined.log"
      cycodmd test-cycodt-*-combined.log exception-test-cycodt-*-combined.log
    expect-regex: |
      Version:
      test-cycodt-[0-9]+-combined\.log
      File logger initialized with file:
      Memory logger configured to dump to
      exception-test-cycodt-[0-9]+-combined\.log
      Logging system fully initialized
    not-expect-regex: |
      ## exception-test-cycodt-.*-combined\.log

  - name: Clean up test log files
    bash: |
      rm -f test-*-log.log test-*-combined.log exception-test-*-log.log exception-test-*-combined.log
      echo "Cleanup completed"
    expect-regex: |
      Cleanup completed