[000002]: 69ms INFO: LoggingInitializer.cs:159 File logger initialized with file: log-cycod-1759514279694.log
[000002]: 69ms INFO: LoggingInitializer.cs:200 Memory logger configured to dump to exception-log-cycod-1759514279694.log only on abnormal exit.
[000002]: 69ms INFO: LoggingInitializer.cs:203 Logging system fully initialized.
[000005]: 94ms VERBOSE: AgentsFileHelpers.cs:37 Found agents file: C:\src\cycod-better-run-process-shell-command-designed-by-ai-uxr\AGENTS.md
[000005]: 94ms VERBOSE: ChatCommand.cs:204 Added AGENTS.md content from C:\src\cycod-better-run-process-shell-command-designed-by-ai-uxr\AGENTS.md as template variable
[000005]: 96ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_MAX_OUTPUT_TOKENS
[000005]: 96ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.MaxOutputTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.MaxOutputTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.MaxOutputTokens'
[000005]: 96ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_MAX_PROMPT_TOKENS
[000005]: 96ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.MaxPromptTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.MaxPromptTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.MaxPromptTokens'
[000005]: 96ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_MAX_TOOL_TOKENS
[000005]: 96ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.MaxToolTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.MaxToolTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.MaxToolTokens'
[000005]: 96ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_MAX_CHAT_TOKENS
[000005]: 96ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.MaxChatTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.MaxChatTokens
[000005]: 96ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.MaxChatTokens'
[000005]: 96ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_AUTO_SAVE_CHAT_HISTORY
[000005]: 96ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.AutoSaveChatHistory
[000005]: 96ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.AutoSaveChatHistory
[000005]: 96ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.AutoSaveChatHistory'
[000005]: 96ms VERBOSE: ScopeFileHelpers.cs:171 EnsureDirectoryInScope: Ensured directory history in scope User at C:\Users\r\.cycod\history
[000005]: 96ms VERBOSE: FileHelpers.cs:157 filePath: C:\Users\r\.cycod\history
[000005]: 96ms VERBOSE: FileHelpers.cs:158 fileBase: chat-history-{time}
[000005]: 96ms VERBOSE: FileHelpers.cs:159 fileExt: jsonl
[000005]: 96ms VERBOSE: FileHelpers.cs:160 timeStamp: 20251003105759
[000005]: 97ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_AUTO_SAVE_TRAJECTORY
[000005]: 97ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.AutoSaveTrajectory
[000005]: 97ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.AutoSaveTrajectory
[000005]: 97ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.AutoSaveTrajectory'
[000005]: 97ms VERBOSE: ScopeFileHelpers.cs:171 EnsureDirectoryInScope: Ensured directory history in scope User at C:\Users\r\.cycod\history
[000005]: 97ms VERBOSE: FileHelpers.cs:157 filePath: C:\Users\r\.cycod\history
[000005]: 97ms VERBOSE: FileHelpers.cs:158 fileBase: trajectory-{time}
[000005]: 97ms VERBOSE: FileHelpers.cs:159 fileExt: md
[000005]: 97ms VERBOSE: FileHelpers.cs:160 timeStamp: 20251003105759
[000005]: 102ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: agents.md
[000005]: 102ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: agents.md
[000005]: 102ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for agents.md
[000005]: 102ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'agents.md'
[000005]: 125ms VERBOSE: TemplateHelpers.cs:26 Evaluating condition: !ISEMPTY("{agents.md}") => True
[000005]: 125ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: agents.file
[000005]: 125ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: agents.file
[000005]: 125ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for agents.file
[000005]: 125ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'agents.file'
[000005]: 125ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: agents.md
[000005]: 125ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: agents.md
[000005]: 125ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for agents.md
[000005]: 125ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'agents.md'
[000005]: 125ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: os
[000005]: 125ms VERBOSE: ConfigStore.cs:434 ConfigStore.TryGetFromEnv; Found 'os' environment variable: Windows_NT
[000005]: 125ms VERBOSE: ConfigStore.cs:58 ConfigStore.GetFromAnyScope; Found 'os' in environment variable: os
[000005]: 125ms VERBOSE: TemplateHelpers.cs:26 Evaluating condition: CONTAINS("Windows_NT", "Windows") => True
[000005]: 125ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: os
[000005]: 125ms VERBOSE: ConfigStore.cs:434 ConfigStore.TryGetFromEnv; Found 'os' environment variable: Windows_NT
[000005]: 125ms VERBOSE: ConfigStore.cs:58 ConfigStore.GetFromAnyScope; Found 'os' in environment variable: os
[000005]: 125ms VERBOSE: TemplateHelpers.cs:26 Evaluating condition: CONTAINS("Windows_NT", "Windows") => True
[000005]: 126ms VERBOSE: ScopeFileHelpers.cs:38 FindFileInScope: Subdirectory prompts does not exist in scope Local.
[000005]: 126ms VERBOSE: ScopeFileHelpers.cs:38 FindFileInScope: Subdirectory prompts does not exist in scope User.
[000005]: 126ms VERBOSE: ConfigFileHelpers.cs:116 On Windows... using CommonApplicationData: C:\ProgramData
[000005]: 126ms VERBOSE: ConfigFileHelpers.cs:74 Global config directory: C:\ProgramData\.cycod
[000005]: 126ms VERBOSE: ScopeFileHelpers.cs:38 FindFileInScope: Subdirectory prompts does not exist in scope Global.
[000005]: 126ms VERBOSE: ScopeFileHelpers.cs:86 FindFileInAnyScope: File you.prompt not found in any scope or parent directories.
[000005]: 126ms VERBOSE: PromptFileHelpers.cs:52 FindPromptFile; prompt NOT FOUND in any scope: you
[000005]: 126ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: agents.file
[000005]: 126ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: agents.file
[000005]: 126ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for agents.file
[000005]: 126ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'agents.file'
[000005]: 126ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: agents.md
[000005]: 126ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: agents.md
[000005]: 126ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for agents.md
[000005]: 126ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'agents.md'
[000005]: 126ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: problem
[000005]: 126ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: problem
[000005]: 126ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for problem
[000005]: 126ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'problem'
[000005]: 140ms VERBOSE: FunctionFactory.cs:106 Adding function 'GetCurrentDate' - Gets the current date.
[000005]: 140ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 1
[000005]: 140ms VERBOSE: FunctionFactory.cs:106 Adding function 'GetCurrentTime' - Gets the current time.
[000005]: 140ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 2
[000005]: 143ms VERBOSE: FunctionFactory.cs:106 Adding function 'RunBashCommand' - Run commands in a bash shell (uses Git Bash on Win...
[000005]: 143ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 3
[000005]: 143ms VERBOSE: FunctionFactory.cs:106 Adding function 'RunCmdCommand' - Run commands in a cmd shell on Windows. This persi...
[000005]: 143ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 4
[000005]: 143ms VERBOSE: FunctionFactory.cs:106 Adding function 'RunPowershellCommand' - Run commands in a PowerShell shell. This persisten...
[000005]: 143ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 5
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'StartLongRunningProcess' - Starts a long-running process in the background an...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 6
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'GetLongRunningProcessOutput' - Gets the accumulated output from a background proc...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 7
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'IsLongRunningProcessRunning' - Checks if a background process is still running. U...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 8
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'KillLongRunningProcess' - Terminates a running background process. Use this ...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 9
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'ListLongRunningProcesses' - Lists all currently running background processes. ...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 10
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'ListFiles' - Returns a list of non-hidden files and directories...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 11
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'ViewFile' - View the content of a specific file, optionally wi...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 12
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'CreateFile' - Creates a new file at the specified path with the ...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 13
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'StrReplace' - Replaces the text specified by `oldStr` with `newS...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 14
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'Insert' - Inserts the specified string `newStr` into the fil...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 15
[000005]: 144ms VERBOSE: FunctionFactory.cs:106 Adding function 'UndoEdit' - Reverts the last edit made to the file at `path`, ...
[000005]: 144ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 16
[000005]: 145ms VERBOSE: FunctionFactory.cs:106 Adding function 'Think' - Use the tool to think about something. It will not...
[000005]: 145ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 17
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'QueryFiles' - Search and query files across a codebase with flex...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 18
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'ConvertFilesToMarkdown' - Convert various file types to well-formatted markd...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 19
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'ResearchWebTopic' - Search the web for information and create a markdo...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 20
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'ExtractContentFromWebPages' - Get content from specific web pages and convert to...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 21
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'AddImageToConversation' - Add one image file to the current conversation. Th...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 22
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'RunShellCommand' - Executes a command in a shell with adaptive timeou...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 23
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'CreateNamedShell' - Creates a named shell that persists across command...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 24
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'StartNamedProcess' - Starts a background process that runs independentl...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 25
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'ExecuteInShell' - Executes a command in an existing named shell. Use...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 26
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'GetShellOrProcessOutput' - Gets output from a shell or process. Provides opti...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 27
[000005]: 150ms VERBOSE: FunctionFactory.cs:106 Adding function 'SendInputToShellOrProcess' - Sends input to a shell or process. Useful for inte...
[000005]: 150ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 28
[000005]: 151ms VERBOSE: FunctionFactory.cs:106 Adding function 'WaitForShellOrProcessExit' - Waits for a shell or process to exit. Useful for e...
[000005]: 151ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 29
[000005]: 151ms VERBOSE: FunctionFactory.cs:106 Adding function 'WaitForShellOrProcessOutput' - Waits for output matching a pattern from a shell o...
[000005]: 151ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 30
[000005]: 151ms VERBOSE: FunctionFactory.cs:106 Adding function 'TerminateShellOrProcess' - Terminates a shell or process. Use this to clean u...
[000005]: 151ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 31
[000005]: 151ms VERBOSE: FunctionFactory.cs:106 Adding function 'ListShellsAndProcesses' - Lists all running shells and processes. Helps you ...
[000005]: 151ms VERBOSE: FunctionFactory.cs:108 Count of functions in factory: 32
[000005]: 151ms INFO: ChatCommand.cs:770 MCP: Initializing MCP functions for chat
[000005]: 152ms VERBOSE: ChatCommand.cs:804 MCP functions are disabled.
[000005]: 152ms INFO: ChatCommand.cs:805 MCP: Functions are disabled (no MCPs specified)
[000005]: 153ms VERBOSE: ChatCommand.cs:845 MCP functions are disabled.
[000005]: 153ms INFO: ChatCommand.cs:846 MCP: No ad-hoc MCP servers specified
[000005]: 153ms INFO: ChatCommand.cs:776 MCP: Created 0 MCP clients in 1ms
[000005]: 153ms INFO: ChatCommand.cs:796 MCP: Finished initializing MCP functions in 1ms
[000005]: 153ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_PREFERRED_PROVIDER
[000005]: 153ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.PreferredProvider
[000005]: 153ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.PreferredProvider
[000005]: 153ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.PreferredProvider'
[000005]: 153ms VERBOSE: ChatClientFactory.cs:208 Creating chat client from environment variables...
[000005]: 153ms VERBOSE: EnvironmentHelpers.cs:5 FindEnvVar: GITHUB_TOKEN
[000005]: 153ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: GITHUB_TOKEN
[000005]: 153ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: GitHub.Token
[000005]: 154ms VERBOSE: ConfigStore.cs:156 ConfigStore.GetFromConfig; Found 'GitHub.Token' in C:\Users\r\.cycod\config.yaml setting: gh************************************BU
[000005]: 154ms VERBOSE: ConfigStore.cs:100 ConfigStore.GetFromAnyScope; Found 'GitHub.Token' in user config file: C:\Users\r\.cycod\config.yaml
[000005]: 155ms VERBOSE: EnvironmentHelpers.cs:5 FindEnvVar: COPILOT_MODEL_NAME
[000005]: 155ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: COPILOT_MODEL_NAME
[000005]: 155ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: Copilot.ModelName
[000005]: 155ms VERBOSE: ConfigStore.cs:156 ConfigStore.GetFromConfig; Found 'Copilot.ModelName' in C:\Users\r\.cycod\config.yaml setting: claude-3.7-sonnet
[000005]: 155ms VERBOSE: ConfigStore.cs:100 ConfigStore.GetFromAnyScope; Found 'Copilot.ModelName' in user config file: C:\Users\r\.cycod\config.yaml
[000005]: 155ms VERBOSE: EnvironmentHelpers.cs:5 FindEnvVar: COPILOT_API_ENDPOINT
[000005]: 155ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: COPILOT_API_ENDPOINT
[000005]: 155ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: Copilot.ApiEndpoint
[000005]: 155ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for Copilot.ApiEndpoint
[000005]: 155ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'COPILOT_API_ENDPOINT'
[000005]: 155ms VERBOSE: EnvironmentHelpers.cs:5 FindEnvVar: GITHUB_TOKEN
[000005]: 155ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: GITHUB_TOKEN
[000005]: 155ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: GitHub.Token
[000005]: 155ms VERBOSE: ConfigStore.cs:156 ConfigStore.GetFromConfig; Found 'GitHub.Token' in C:\Users\r\.cycod\config.yaml setting: gh************************************BU
[000005]: 155ms VERBOSE: ConfigStore.cs:100 ConfigStore.GetFromAnyScope; Found 'GitHub.Token' in user config file: C:\Users\r\.cycod\config.yaml
[000005]: 155ms VERBOSE: EnvironmentHelpers.cs:5 FindEnvVar: COPILOT_INTEGRATION_ID
[000005]: 155ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: COPILOT_INTEGRATION_ID
[000005]: 155ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: Copilot.IntegrationId
[000005]: 155ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for Copilot.IntegrationId
[000005]: 155ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'COPILOT_INTEGRATION_ID'
[000005]: 155ms VERBOSE: EnvironmentHelpers.cs:5 FindEnvVar: COPILOT_EDITOR_VERSION
[000005]: 155ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: COPILOT_EDITOR_VERSION
[000005]: 155ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: Copilot.EditorVersion
[000005]: 155ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for Copilot.EditorVersion
[000005]: 155ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'COPILOT_EDITOR_VERSION'
[000005]: 161ms VERBOSE: LogTrafficHttpMessageHandler.cs:41 ===== REQUEST: GET https://api.github.com/copilot_internal/v2/token
[000005]: 161ms VERBOSE: LogTrafficHttpMessageHandler.cs:57 ===== REQUEST HEADER: Authorization: [REDACTED]
[000005]: 161ms VERBOSE: LogTrafficHttpMessageHandler.cs:57 ===== REQUEST HEADER: editor-version: Neovim/0.6.1
[000005]: 161ms VERBOSE: LogTrafficHttpMessageHandler.cs:57 ===== REQUEST HEADER: editor-plugin-version: copilot.vim/1.16.0
[000005]: 161ms VERBOSE: LogTrafficHttpMessageHandler.cs:57 ===== REQUEST HEADER: User-Agent: GithubCopilot/1.155.0
[000005]: 161ms VERBOSE: LogTrafficHttpMessageHandler.cs:57 ===== REQUEST HEADER: Accept: application/json
[000013]: 608ms VERBOSE: LogTrafficHttpMessageHandler.cs:80 ===== RESPONSE: OK (OK)
[000013]: 608ms INFO: LogTrafficHttpMessageHandler.cs:81 HTTP Response: 200 OK (OK)
[000013]: 609ms VERBOSE: LogTrafficHttpMessageHandler.cs:102 ===== RESPONSE HEADERS: Date: Fri, 03 Oct 2025 17:58:00 GMT\nCache-Control: max-age=60, s-maxage=60, private\nVary: Accept, Authorization, Cookie, X-GitHub-OTP, Accept-Encoding, Accept, X-Requested-With\nETag: W/"6b3c4b2062dd2a84e33d59dcc377265360de10028804cb8edfa19092b5957680"\nX-OAuth-Scopes: \nX-Accepted-OAuth-Scopes: \nx-oauth-client-id: Iv1.b507a08c87ecfe98\nX-GitHub-Media-Type: github.v3\nX-RateLimit-Limit: 15000\nX-RateLimit-Remaining: 14992\nX-RateLimit-Reset: 1759516721\nX-RateLimit-Used: 8\nX-RateLimit-Resource: core\nAccess-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset\nAccess-Control-Allow-Origin: *\nStrict-Transport-Security: max-age=31536000; includeSubdomains; preload\nX-Frame-Options: deny\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\nReferrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin\nContent-Security-Policy: default-src 'none'\nTransfer-Encoding: chunked\nServer: github.com\nX-GitHub-Request-Id: FA3A:2DC54E:871CFD:8965BE:68E00EA7\n
[000013]: 613ms VERBOSE: LogTrafficHttpMessageHandler.cs:112 ===== RESPONSE BODY: {"annotations_enabled":true,"blackbird_clientside_indexing":false,"chat_enabled":true,"chat_jetbrains_enabled":true,"code_quote_enabled":false,"code_review_enabled":true,"codesearch":true,"copilotignore_enabled":false,"endpoints":{"api":"https://api.business.githubcopilot.com","origin-tracker":"https://origin-tracker.business.githubcopilot.com","proxy":"https://proxy.business.githubcopilot.com","telemetry":"https://telemetry.business.githubcopilot.com"},"expires_at":1759516080,"individual":false,"limited_user_quotas":null,"limited_user_reset_date":null,"organization_list":["7fa0b12f4c043943297574d44664bc18"],"prompt_8k":true,"public_suggestions":"enabled","refresh_in":1500,"sku":"copilot_for_business_seat_quota","snippy_load_test_enabled":false,"telemetry":"disabled","token":"tid=70fb4083af788c0bb1a90b6beed0db41;ol=7fa0b12f4c043943297574d44664bc18;exp=1759516080;sku=copilot_for_business_seat_quota;proxy-ep=proxy.business.githubcopilot.com;st=dotcom;ssc=1;chat=1;sn=1;malfil=1;editor_preview_features=1;agent_mode=1;mcp=0;ccr=1;8kp=1;ip=174.164.236.245;asn=AS7922:7f6735683658b25b0f149b7ee226c74d6a8712389446daf1120e40158c09a5cc","tracking_id":"70fb4083af788c0bb1a90b6beed0db41","vsc_electron_fetcher_v2":false,"xcode":true,"xcode_chat":false}
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:134 Copilot token response: {"annotations_enabled":true,"blackbird_clientside_indexing":false,"chat_enabled":true,"chat_jetbrains_enabled":true,"code_quote_enabled":false,"code_review_enabled":true,"codesearch":true,"copilotignore_enabled":false,"endpoints":{"api":"https://api.business.githubcopilot.com","origin-tracker":"https://origin-tracker.business.githubcopilot.com","proxy":"https://proxy.business.githubcopilot.com","telemetry":"https://telemetry.business.githubcopilot.com"},"expires_at":1759516080,"individual":false,"limited_user_quotas":null,"limited_user_reset_date":null,"organization_list":["7fa0b12f4c043943297574d44664bc18"],"prompt_8k":true,"public_suggestions":"enabled","refresh_in":1500,"sku":"copilot_for_business_seat_quota","snippy_load_test_enabled":false,"telemetry":"disabled","token":"tid=70fb4083af788c0bb1a90b6beed0db41;ol=7fa0b12f4c043943297574d44664bc18;exp=1759516080;sku=copilot_for_business_seat_quota;proxy-ep=proxy.business.githubcopilot.com;st=dotcom;ssc=1;chat=1;sn=1;malfil=1;editor_preview_features=1;agent_mode=1;mcp=0;ccr=1;8kp=1;ip=174.164.236.245;asn=AS7922:7f6735683658b25b0f149b7ee226c74d6a8712389446daf1120e40158c09a5cc","tracking_id":"70fb4083af788c0bb1a90b6beed0db41","vsc_electron_fetcher_v2":false,"xcode":true,"xcode_chat":false}
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Date = Fri, 03 Oct 2025 17:58:00 GMT
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Cache-Control = max-age=60, s-maxage=60, private
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Vary = Accept, Authorization, Cookie, X-GitHub-OTP, Accept-Encoding, Accept, X-Requested-With
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: ETag = W/"6b3c4b2062dd2a84e33d59dcc377265360de10028804cb8edfa19092b5957680"
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-OAuth-Scopes = 
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-Accepted-OAuth-Scopes = 
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: x-oauth-client-id = Iv1.b507a08c87ecfe98
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-GitHub-Media-Type = github.v3
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-RateLimit-Limit = 15000
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-RateLimit-Remaining = 14992
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-RateLimit-Reset = 1759516721
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-RateLimit-Used = 8
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-RateLimit-Resource = core
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Access-Control-Expose-Headers = ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Access-Control-Allow-Origin = *
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Strict-Transport-Security = max-age=31536000; includeSubdomains; preload
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-Frame-Options = deny
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-Content-Type-Options = nosniff
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-XSS-Protection = 0
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Referrer-Policy = origin-when-cross-origin, strict-origin-when-cross-origin
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Content-Security-Policy = default-src 'none'
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Transfer-Encoding = chunked
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: Server = github.com
[000013]: 613ms VERBOSE: GitHubCopilotHelper.cs:137 Header: X-GitHub-Request-Id = FA3A:2DC54E:871CFD:8965BE:68E00EA7
[000013]: 619ms VERBOSE: GitHubCopilotHelper.cs:147 Copilot token: tid=70fb4083af788c0bb1a90b6beed0db41;ol=7fa0b12f4c043943297574d44664bc18;exp=1759516080;sku=copilot_for_business_seat_quota;proxy-ep=proxy.business.githubcopilot.com;st=dotcom;ssc=1;chat=1;sn=1;malfil=1;editor_preview_features=1;agent_mode=1;mcp=0;ccr=1;8kp=1;ip=174.164.236.245;asn=AS7922:7f6735683658b25b0f149b7ee226c74d6a8712389446daf1120e40158c09a5cc
[000005]: 621ms VERBOSE: ConfigStore.cs:429 ConfigStore.TryGetFromEnv; checking environment variable: CYCOD_CHAT_COMPLETION_TIMEOUT
[000005]: 621ms VERBOSE: ConfigStore.cs:143 ConfigStore.GetFromConfig; checking User setting: App.ChatCompletionTimeout
[000005]: 621ms VERBOSE: ConfigStore.cs:161 ConfigStore.GetFromConfig; no config file found for App.ChatCompletionTimeout
[000005]: 621ms VERBOSE: ConfigStore.cs:118 ConfigStore.GetFromAnyScope; no value found for 'App.ChatCompletionTimeout'
[000005]: 623ms VERBOSE: ChatClientFactory.cs:151 Using GitHub Copilot token for authentication (with auto-refresh)
[000005]: 625ms VERBOSE: FunctionCallingChat.cs:17 FunctionCallingChat: Found 32 tools in FunctionFactory
[000005]: 631ms VERBOSE: ChatMessageHelpers.cs:169 Total bytes: 12495, estimated tokens: 3123, chat token target: 160000, is too big: False
[000005]: 636ms VERBOSE: ChatMessageHelpers.cs:283 User chat content size: 57, max token size: 50000, is too big: False
[000005]: 636ms VERBOSE: ChatMessageHelpers.cs:169 Total bytes: 12612, estimated tokens: 3153, chat token target: 160000, is too big: False
[000005]: 667ms VERBOSE: TrafficEventPolicy.cs:22 ===== FIRING EVENTS ======
[000005]: 667ms VERBOSE: LogTrafficEventPolicy.cs:23 ===== REQUEST: POST https://api.githubcopilot.com/chat/completions
[000005]: 668ms VERBOSE: LogTrafficEventPolicy.cs:35 ===== REQUEST HEADER: Accept: application/json
[000005]: 668ms VERBOSE: LogTrafficEventPolicy.cs:35 ===== REQUEST HEADER: Content-Type: application/json
[000005]: 668ms VERBOSE: LogTrafficEventPolicy.cs:35 ===== REQUEST HEADER: User-Agent: OpenAI/2.2.0-beta.4 (.NET 9.0.8; Microsoft Windows 10.0.26100)
[000005]: 669ms VERBOSE: LogTrafficEventPolicy.cs:47 ===== REQUEST BODY: {"tools":[{"function":{"description":"Gets the current date.","name":"GetCurrentDate","parameters":{"type":"object","required":[],"properties":{},"additionalProperties":false}},"type":"function"},{"function":{"description":"Gets the current time.","name":"GetCurrentTime","parameters":{"type":"object","required":[],"properties":{},"additionalProperties":false}},"type":"function"},{"function":{"description":"Run commands in a bash shell (uses Git Bash on Windows). This persistent session maintains state across commands. You can run commands such as Python, Node.js and Go, and install packages with winget (on Windows), pip, npm, or go. If a command times out, the session is reset. Otherwise, returns the output of the command. WARNING: This is a blocking operation that waits for command completion before returning.","name":"RunBashCommand","parameters":{"type":"object","required":["command","timeoutMs","maxCharsPerLine","maxTotalChars"],"properties":{"command":{"description":"The bash command to run.","type":"string"},"timeoutMs":{"description":"Timeout in milliseconds for the command execution. (Default value: 60000)","type":"integer"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Run commands in a cmd shell on Windows. This persistent session maintains state across commands. You can run commands such as Python, Node.js and Go, and install packages with winget, pip, npm, or go. If a command times out, the session is reset. Otherwise, returns the output of the command. WARNING: This is a blocking operation that waits for command completion before returning.","name":"RunCmdCommand","parameters":{"type":"object","required":["command","timeoutMs","maxCharsPerLine","maxTotalChars"],"properties":{"command":{"description":"The cmd command to run.","type":"string"},"timeoutMs":{"description":"Timeout in milliseconds for the command execution. (Default value: 60000)","type":"integer"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Run commands in a PowerShell shell. This persistent session maintains state across commands. You can run commands such as Python, Node.js and Go, and install packages with winget (on Windows), pip, npm, or go. If a command times out, the session is reset. Otherwise, returns the output of the command.WARNING: This is a blocking operation that waits for command completion before returning.","name":"RunPowershellCommand","parameters":{"type":"object","required":["command","timeoutMs","maxCharsPerLine","maxTotalChars"],"properties":{"command":{"description":"The PowerShell command to run.","type":"string"},"timeoutMs":{"description":"Timeout in milliseconds for the command execution. (Default value: 60000)","type":"integer"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Starts a long-running process in the background and returns a cookie that can be used to manage it. Useful for starting web servers, watchers, or other processes that need to run continuously while you continue interacting. Unlike direct command execution, background processes don\u0027t block further commands. Note: The returned cookie is only valid for use with related process management functions and is not a system process ID.","name":"StartLongRunningProcess","parameters":{"type":"object","required":["processName","processArguments","workingDirectory"],"properties":{"processName":{"description":"The name of the executable or process to run","type":"string"},"processArguments":{"description":"Optional arguments to pass to the process (Default value: \u0022\u0022)","type":"string"},"workingDirectory":{"description":"Optional working directory for the process (Default value: \u0022\u0022)","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Gets the accumulated output from a background process without stopping it. Use this to check progress of a background operation while it continues to run.","name":"GetLongRunningProcessOutput","parameters":{"type":"object","required":["processHandle","clearBuffer","maxCharsPerLine","maxTotalChars"],"properties":{"processHandle":{"description":"Process cookie obtained from StartLongRunningProcess (not a system process ID)","type":"string"},"clearBuffer":{"description":"Whether to clear the output buffer after retrieving (Default value: false)","type":"boolean"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Checks if a background process is still running. Use this to monitor the status of background operations before taking further actions.","name":"IsLongRunningProcessRunning","parameters":{"type":"object","required":["processHandle"],"properties":{"processHandle":{"description":"Process cookie obtained from StartLongRunningProcess (not a system process ID)","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Terminates a running background process. Use this to clean up background operations when they\u0027re no longer needed.","name":"KillLongRunningProcess","parameters":{"type":"object","required":["processHandle","force"],"properties":{"processHandle":{"description":"Process cookie obtained from StartLongRunningProcess (not a system process ID)","type":"string"},"force":{"description":"Whether to force kill the process if it doesn\u0027t terminate gracefully (Default value: false)","type":"boolean"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Lists all currently running background processes. Helps you keep track of what\u0027s running and allows you to manage multiple concurrent operations.","name":"ListLongRunningProcesses","parameters":{"type":"object","required":["maxCharsPerLine","maxTotalChars"],"properties":{"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Returns a list of non-hidden files and directories up to 2 levels deep.","name":"ListFiles","parameters":{"type":"object","required":["path"],"properties":{"path":{"description":"Absolute or relative path to directory.","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"View the content of a specific file, optionally with line ranges and content filtering.","name":"ViewFile","parameters":{"type":"object","required":["path","startLine","endLine","lineNumbers","lineContains","removeAllLines","linesBeforeAndAfter","maxCharsPerLine","maxTotalChars"],"properties":{"path":{"description":"Absolute or relative path to file.","type":"string"},"startLine":{"description":"Start line number (1-indexed). Negative numbers count from end (-1 = last line). Default: 1 (Default value: 1)","type":"integer"},"endLine":{"description":"End line number. 0 or -1 = end of file. Negative numbers count from end. Default: 0 (Default value: 0)","type":"integer"},"lineNumbers":{"description":"Include line numbers in output. (Default value: false)","type":"boolean"},"lineContains":{"description":"Only show lines containing this regex pattern. Applied after removeAllLines filter. (Default value: \u0022\u0022)","type":"string"},"removeAllLines":{"description":"Remove lines containing this regex pattern. Applied first, before other filters. (Default value: \u0022\u0022)","type":"string"},"linesBeforeAndAfter":{"description":"Number of lines to show before and after lineContains matches. (Default value: 0)","type":"integer"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Creates a new file at the specified path with the given content. The \u0060create\u0060 command cannot be used if the file already exists.","name":"CreateFile","parameters":{"type":"object","required":["path","fileText"],"properties":{"path":{"description":"Absolute or relative path to file.","type":"string"},"fileText":{"description":"Content to be written to the file.","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Replaces the text specified by \u0060oldStr\u0060 with \u0060newStr\u0060 in the file at \u0060path\u0060. If the provided old string is not unique, no changes are made.","name":"StrReplace","parameters":{"type":"object","required":["path","oldStr","newStr"],"properties":{"path":{"description":"Absolute or relative path to file.","type":"string"},"oldStr":{"description":"Existing text in the file that should be replaced. Must match exactly one occurrence.","type":"string"},"newStr":{"description":"New string content that will replace the old string.","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Inserts the specified string \u0060newStr\u0060 into the file at \u0060path\u0060 after the specified line number (\u0060insertLine\u0060). Use 0 to insert at the beginning of the file.","name":"Insert","parameters":{"type":"object","required":["path","insertLine","newStr"],"properties":{"path":{"description":"Absolute or relative path to file.","type":"string"},"insertLine":{"description":"Line number (1-indexed) after which to insert the new string.","type":"integer"},"newStr":{"description":"The string to insert into the file.","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Reverts the last edit made to the file at \u0060path\u0060, undoing the last change if available.","name":"UndoEdit","parameters":{"type":"object","required":["path"],"properties":{"path":{"description":"Absolute or relative path to file.","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Use the tool to think about something. It will not obtain new information or make any changes to the repository, but just log the thought. Use it when complex reasoning or brainstorming is needed. For example, if you explore the repo and discover the source of a bug, call this tool to brainstorm several unique ways of fixing the bug, and assess which change(s) are likely to be simplest and most effective. Alternatively, if you receive some test results, call this tool to brainstorm ways to fix the failing tests.","name":"Think","parameters":{"type":"object","required":["thought"],"properties":{"thought":{"description":"Your thoughts.","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Search and query files across a codebase with flexible filtering options. Use for discovering files and content matching specific criteria.","name":"QueryFiles","parameters":{"type":"object","required":["filePatterns","excludePatterns","fileContains","fileNotContains","modifiedAfter","modifiedBefore","searchPattern","lineContains","removeAllLines","linesBeforeAndAfter","lineNumbers","maxFiles","maxCharsPerLine","maxTotalChars"],"properties":{"filePatterns":{"description":"File glob patterns to search (e.g., **/*.cs, src/*.md)","type":"array","items":{"type":"string"}},"excludePatterns":{"description":"File glob patterns to exclude (Default value: null)","type":"array","items":{"type":"string"}},"fileContains":{"description":"Only include files containing this regex pattern (Default value: \u0022\u0022)","type":"string"},"fileNotContains":{"description":"Exclude files containing this regex pattern (Default value: \u0022\u0022)","type":"string"},"modifiedAfter":{"description":"Only files modified after this time (e.g., \u00273d\u0027, \u00272023-01-01\u0027) (Default value: \u0022\u0022)","type":"string"},"modifiedBefore":{"description":"Only files modified before this time (Default value: \u0022\u0022)","type":"string"},"searchPattern":{"description":"Search pattern to find and highlight with context lines (Default value: \u0022\u0022)","type":"string"},"lineContains":{"description":"Only show lines containing this regex pattern. Applied after removeAllLines filter. (Default value: \u0022\u0022)","type":"string"},"removeAllLines":{"description":"Remove lines containing this regex pattern. Applied first, before other filters. (Default value: \u0022\u0022)","type":"string"},"linesBeforeAndAfter":{"description":"Number of lines to show before and after matches. 0 = matches only. (Default value: 0)","type":"integer"},"lineNumbers":{"description":"Include line numbers in output. (Default value: true)","type":"boolean"},"maxFiles":{"description":"Maximum number of files to process. (Default value: 50)","type":"integer"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Convert various file types to well-formatted markdown. Supports documentation files, source code, images, PDFs, and more. Useful for generating documentation or reports from existing files.","name":"ConvertFilesToMarkdown","parameters":{"type":"object","required":["filePaths","formattingInstructions","showLineNumbers","maxCharsPerLine","maxTotalChars"],"properties":{"filePaths":{"description":"Specific file paths or glob patterns to convert (e.g. [\u0022README.md\u0022, \u0022*.pdf\u0022, \u0022docs/*.docx\u0022)","type":"array","items":{"type":"string"}},"formattingInstructions":{"description":"Instructions for AI to format or structure the output (e.g. \u0022create a table of contents\u0022 or \u0022highlight important sections\u0022) (Default value: \u0022\u0022)","type":"string"},"showLineNumbers":{"description":"Whether to include line numbers for code files (Default value: false)","type":"boolean"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Search the web for information and create a markdown summary of results. Great for research tasks and gathering information from multiple sources without leaving your workflow.","name":"ResearchWebTopic","parameters":{"type":"object","required":["searchQuery","includePageContent","maxResults","searchEngine","stripHtml","maxCharsPerLine","maxTotalChars"],"properties":{"searchQuery":{"description":"Search query or research topic","type":"string"},"includePageContent":{"description":"Whether to download and include actual page content (not just links) (Default value: true)","type":"boolean"},"maxResults":{"description":"Maximum number of search results to process (Default value: 5)","type":"integer"},"searchEngine":{"description":"Search engine to use: \u0027google\u0027, \u0027bing\u0027, \u0027duckduckgo\u0027, or \u0027yahoo\u0027 (Default value: \u0022duckduckgo\u0022)","type":"string"},"stripHtml":{"description":"Whether to strip HTML formatting from page content (Default value: true)","type":"boolean"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Get content from specific web pages and convert to markdown. Useful for extracting information from known websites and creating summaries or documentation.","name":"ExtractContentFromWebPages","parameters":{"type":"object","required":["urls","stripHtml","maxCharsPerLine","maxTotalChars"],"properties":{"urls":{"description":"URLs of web pages to extract content from","type":"array","items":{"type":"string"}},"stripHtml":{"description":"Whether to strip HTML formatting (Default value: true)","type":"boolean"},"maxCharsPerLine":{"description":"Maximum number of characters to display per line. (Default value: 500)","type":"integer"},"maxTotalChars":{"description":"Maximum total number of characters to display. (Default value: 100000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Add one image file to the current conversation. The image will be included in the next message exchange.","name":"AddImageToConversation","parameters":{"type":"object","required":["imageFileName"],"properties":{"imageFileName":{"description":"Absolute file path to one image file; width and height must be less than 8000px","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Executes a command in a shell with adaptive timeout handling. If the command completes within the expected timeout, returns the result directly. If it exceeds the timeout, automatically converts to a managed shell that can be interacted with later.","name":"RunShellCommand","parameters":{"type":"object","required":["command","shellType","expectedTimeout","workingDir","environmentVariables"],"properties":{"command":{"description":"The command to execute","type":"string"},"shellType":{"description":"Shell type to use: bash, cmd, powershell (Default value: \u0022bash\u0022)","type":"string"},"expectedTimeout":{"description":"Expected timeout in milliseconds (Default value: 60000)","type":"integer"},"workingDir":{"description":"Working directory for the command (Default value: null)","type":"string"},"environmentVariables":{"description":"Environment variables as JSON object (Default value: null)","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Creates a named shell that persists across commands. Useful for workflows requiring multiple related commands that share state, environment variables, or working directory.","name":"CreateNamedShell","parameters":{"type":"object","required":["shellType","shellName","workingDirectory","environmentVariables"],"properties":{"shellType":{"description":"Shell type: bash, cmd, powershell (Default value: \u0022bash\u0022)","type":"string"},"shellName":{"description":"Optional custom name for the shell (Default value: null)","type":"string"},"workingDirectory":{"description":"Working directory for the shell (Default value: null)","type":"string"},"environmentVariables":{"description":"Environment variables as JSON object (Default value: null)","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Starts a background process that runs independently. Ideal for servers, watchers, or other long-running processes that need to operate in the background while you perform other tasks.","name":"StartNamedProcess","parameters":{"type":"object","required":["executablePath","processArguments","processName","workingDirectory","environmentVariables"],"properties":{"executablePath":{"description":"The executable to run","type":"string"},"processArguments":{"description":"Arguments to pass to the process (Default value: \u0022\u0022)","type":"string"},"processName":{"description":"Optional custom name for the process (Default value: null)","type":"string"},"workingDirectory":{"description":"Working directory for the process (Default value: null)","type":"string"},"environmentVariables":{"description":"Environment variables as JSON object (Default value: null)","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Executes a command in an existing named shell. Use this to run commands in shells created with CreateNamedShell or shells that were automatically created when a RunShellCommand exceeded its timeout.","name":"ExecuteInShell","parameters":{"type":"object","required":["shellName","command","timeoutMs"],"properties":{"shellName":{"description":"Shell name from CreateNamedShell or auto-created shell","type":"string"},"command":{"description":"Command to execute in the shell","type":"string"},"timeoutMs":{"description":"Timeout in milliseconds (Default value: 60000)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Gets output from a shell or process. Provides options to retrieve specific output types, clear buffers, and wait for new output or patterns.","name":"GetShellOrProcessOutput","parameters":{"type":"object","required":["name","outputType","clearBuffer","waitTimeMs","waitPattern"],"properties":{"name":{"description":"Shell or process name","type":"string"},"outputType":{"description":"Output type: stdout, stderr, or all (Default value: \u0022all\u0022)","type":"string"},"clearBuffer":{"description":"Whether to clear the output buffer after retrieval (Default value: false)","type":"boolean"},"waitTimeMs":{"description":"Time to wait for new output in milliseconds (0 = don\u0027t wait) (Default value: 0)","type":"integer"},"waitPattern":{"description":"Pattern to wait for in the output (null = don\u0027t wait for pattern) (Default value: null)","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Sends input to a shell or process. Useful for interactive applications that require user input during execution.","name":"SendInputToShellOrProcess","parameters":{"type":"object","required":["name","inputText"],"properties":{"name":{"description":"Shell or process name","type":"string"},"inputText":{"description":"Text to send as input","type":"string"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Waits for a shell or process to exit. Useful for ensuring that a process has completed before proceeding with subsequent operations.","name":"WaitForShellOrProcessExit","parameters":{"type":"object","required":["name","timeoutMs"],"properties":{"name":{"description":"Shell or process name","type":"string"},"timeoutMs":{"description":"Timeout in milliseconds, -1 for indefinite (Default value: -1)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Waits for output matching a pattern from a shell or process. Useful for detecting when a specific condition or state has been reached in a running application.","name":"WaitForShellOrProcessOutput","parameters":{"type":"object","required":["name","pattern","timeoutMs"],"properties":{"name":{"description":"Shell or process name","type":"string"},"pattern":{"description":"Regular expression pattern to wait for","type":"string"},"timeoutMs":{"description":"Timeout in milliseconds, -1 for indefinite (Default value: -1)","type":"integer"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Terminates a shell or process. Use this to clean up resources when they\u0027re no longer needed or to stop processes that have become unresponsive.","name":"TerminateShellOrProcess","parameters":{"type":"object","required":["name","force"],"properties":{"name":{"description":"Shell or process name","type":"string"},"force":{"description":"Whether to force kill if graceful termination fails (Default value: false)","type":"boolean"}},"additionalProperties":false}},"type":"function"},{"function":{"description":"Lists all running shells and processes. Helps you keep track of what\u0027s running and allows you to manage multiple concurrent operations.","name":"ListShellsAndProcesses","parameters":{"type":"object","required":[],"properties":{},"additionalProperties":false}},"type":"function"}],"messages":[{"role":"system","content":"You are a helpful AI assistant.\r\n\r\n## Project Context from AGENTS.md\r\n\r\n# Project Overview\r\nThis is a cycod CLI application written in C#. It consists of multiple components:\r\n\r\n- **cycod**: The main command-line interface for AI chat interactions\r\n- **cycodmd**: Markdown processing tool for documentation\r\n- **cycodt**: Testing framework for the application\r\n\r\n## Development Environment Tips\r\n- Use modern C# conventions\r\n- Follow existing patterns in the codebase\r\n- Ensure proper error handling\r\n- Look for existing helper methods before implementing your own functionality\r\n- Leverage the FileHelpers class for file operations\r\n\r\n## Code Style\r\n\r\n### General Guidelines\r\n- Follow Microsoft C# coding guidelines\r\n- Avoid magic strings and numbers\r\n- Use meaningful variable and method names\r\n- \u0022When in Rome, do as the Romans do\u0022 - match the style of the file you\u0027re modifying\r\n\r\n### Variables and Types\r\n- Use \u0060var\u0060 consistently for local variable declarations\r\n- Only use explicit types when it improves clarity or the type is not obvious from the right side\r\n\r\n### Expressions and Statements\r\n- Prefer concise code (e.g., ternary operators for simple conditionals)\r\n- Prefer LINQ and functional programming patterns where appropriate\r\n- Maintain existing functional patterns (e.g., if code uses SelectMany, continue that pattern)\r\n\r\n### Methods and Functions\r\n- Prefer smaller, focused methods over large ones with multiple responsibilities\r\n- Prefer singular methods (e.g., ProcessFile) over batch methods (e.g., ProcessFiles)\r\n- Keep the original structure of methods when adding error handling\r\n\r\n### Comments and Documentation\r\n- Use XML documentation comments for public members only\r\n- Follow the commenting style of the file - if a file doesn\u0027t use comments, don\u0027t add them\r\n- Let code be self-documenting whenever possible\r\n\r\n### Error Handling\r\n- Use specific exception types rather than string pattern checking in catch blocks\r\n- Follow existing error handling patterns in the codebase\r\n- For critical errors, log clear messages and prevent further execution\r\n- For non-critical errors, log warnings and allow execution to continue\r\n\r\n### Console Output\r\n- Use \u0060ConsoleHelpers\u0060 methods instead of direct \u0060Console\u0060 calls for all user output\r\n- Follow existing color conventions:\r\n  - Red for errors (\u0060ConsoleHelpers.WriteErrorLine\u0060)\r\n  - Yellow for warnings and guidance (\u0060ConsoleHelpers.WriteLine\u0060 with ConsoleColor.Yellow)\r\n  - White/default for standard output\r\n\r\n### Code Organization\r\n- Place helper methods near related primary methods\r\n- Keep changes localized to specific files when possible\r\n- When adding new code, follow the existing organization pattern of the file\r\n- Put methods in a logical order that follows the execution flow\r\n\r\n### Refactoring and Modifying Code\r\n- Prefer minimal changes that preserve existing structure\r\n- When fixing bugs, focus on addressing the root cause rather than symptoms\r\n- When adding error handling, try to keep the original code flow intact\r\n- Create specific types (e.g., custom exceptions) rather than using string checking or other workarounds\r\n- Keep changes backward compatible when possible\r\n\r\n## PR Instructions\r\n- Run tests before submitting PRs\r\n- Keep changes focused and small when possible\r\n- Follow semantic versioning\r\n\r\n## Security Considerations\r\n- Never commit secrets\r\n- Always validate user input\r\n- Don\u0027t expose sensitive information in error messages\r\n\r\n## Code Organization\r\n- Reuse existing utility classes whenever possible\r\n- Check FileHelpers.cs for file-related operations before creating custom implementations\r\n- When extending functionality, consider adding to existing helper classes rather than creating duplicates\r\n\r\n## Key Helper Classes\r\n- **FileHelpers**: Core utility for file operations including reading, writing, finding files, path manipulations\r\n- **AgentsFileHelpers**: Specifically for handling AGENTS.md and similar agent instruction files\r\n- **ChatHistoryFileHelpers**: Manages chat history files and their locations\r\n- **ScopeFileHelpers**: Handles files in different configuration scopes\r\n- **PromptFileHelpers**: Manages prompt templates and files\r\n- **McpFileHelpers**: Handles MCP (Multi-Command Protocol) server configurations\r\n\r\n## Configuration System\r\nThe application uses a multi-layered configuration system with three scopes:\r\n- **Local**: Project-specific settings (highest priority)\r\n- **User**: User-specific settings across projects\r\n- **Global**: System-wide settings (lowest priority)\r\n\r\nFiles and configurations are searched across these scopes in order of priority.\r\n\r\n## Command Structure\r\nCommands follow a consistent pattern:\r\n- Command classes inherit from appropriate base classes\r\n- Each command handles its own parameter validation\r\n- Commands should use existing helper methods when available\r\n- Commands should respect the configuration scope system\r\n\r\n## Testing with cycodt\r\nThe project uses a YAML-based test framework called cycodt. Key operations:\r\n\r\n- **List tests**: \u0060dotnet run --project src/cycodt/cycodt.csproj list --file \u003Ctest_file.yaml\u003E\u0060\r\n- **Run specific test**: \u0060dotnet run --project src/cycodt/cycodt.csproj run --file \u003Ctest_file.yaml\u003E --test \u0022\u003Ctest_name\u003E\u0022\u0060\r\n- **Run all tests in file**: \u0060dotnet run --project src/cycodt/cycodt.csproj run --file \u003Ctest_file.yaml\u003E\u0060\r\n\r\nTests are defined in YAML files with:\r\n- Test name and command/script to run\r\n- Expected outputs (regex patterns)\r\n- Environment variables, inputs, and other settings\r\n\r\n### Testing Best Practices\r\n\r\n**File Creation and Content Verification:**\r\n- Use \u0060cycodmd\u0060 with patterns to verify both file creation AND content in one step\r\n- Much cleaner than bash scripting with \u0060ls\u0060/\u0060cat\u0060 combinations\r\n- Example: \u0060dotnet run --project ../../src/cycodmd/cycodmd.csproj -- log-*.log\u0060\r\n\r\n**Side Effect Detection:**\r\n- Use \u0060not-expect-regex\u0060 to catch unwanted files or outputs (great for detecting \u0022turd files\u0022)\r\n- Example: \u0060not-expect-regex: \u0022## exception-log-.*\\.log\u0022\u0060 to ensure no exception logs appear\r\n\r\n**Test Structure:**\r\n- Clean up only at the end - allows debugging failed tests by inspecting leftover files\r\n- Use minimal comments in test files - step names should be self-documenting\r\n- Avoid redundant bash comments when the command is obvious\r\n\r\n**Debugging Failed Tests:**\r\n- Make tests fail deliberately to see full output using impossible expect-regex patterns\r\n- Use \u0060git status\u0060 after test runs to detect unintended side effects\r\n- Check for \u0022turd files\u0022 that tests should clean up but don\u0027t\r\n\r\n**Handling Tests for Broken Product Functionality:**\r\nWhen discovering broken functionality while writing tests:\r\n- Mark tests as optional with the \u0060broken-test\u0060 category: \u0060optional: broken-test\u0060\r\n- Document the issue in a \u0060todo-{problem}.md\u0060 file with detailed findings\r\n- Include reproduction steps using \u0060--include-optional broken-test\u0060 in the TODO\r\n- This keeps broken tests separate from working tests while preserving evidence\r\n\r\nWhen creating YAML tests:\r\n- Use \u0060|\u0060 for multi-line scripts/commands to preserve line breaks\r\n- Each line in \u0060expect-regex\u0060 matches as a substring of output lines\r\n- Include cleanup steps for resources created during tests\r\n\r\nFor detailed documentation on creating test files and all available options, refer to:\r\n\u0060src/cycodt/TestFramework/README.md\u0060\r\n\r\nExample test files can be found in the \u0060tests/cycodt-yaml/\u0060 directory.\r\n\r\n## Operating System \u002B Shell Commands\r\nThe application is designed to run on Windows, macOS, and Linux environments. Be mindful of:\r\n- Path separators (\u0060\\\u0060 vs \u0060/\u0060)\r\n- Line endings (CRLF vs LF)\r\n- Process execution differences across platforms\r\n- File system permissions\r\n\r\nShell commands are executed through helper methods that handle platform-specific considerations.\r\n\r\n---\r\n\r\n## Operating System \u002B Long running processes \u002B Shell commands\r\n\r\nThere are two ways to run/start processes/commands:\r\n- Using the \u0060RunBashCommand\u0060, \u0060RunCmdCommand\u0060, or \u0060RunPowershellCommand\u0060 functions for direct execution.\r\n- Using the \u0060StartLongRunningProcess\u0060 function for background processes.\r\n\r\n### Long running processes\r\n\r\nStartLongRunningProcess returns a process cookie that can be used to manage the background process. You can use this with:\r\n- GetLongRunningProcessOutput to retrieve output from the process while it runs.\r\n- IsLongRunningProcessRunning to check if the process is still active.\r\n- KillLongRunningProcess to terminate the process if needed.\r\n- ListLongRunningProcesses to see all active background processes started using StartLongRunningProcess.\r\n\r\n### Shell commands\r\n\r\nWe\u0027re running on Windows. Bash commands are run using Git bash, and thus, you can\u0027t install packages using apt or other Linux-specific package managers.\r\n\r\nCommands are run in a \u0022persistent\u0022 shell, meaning, changes to working directory, environment variables, and other state will persist across commands. This means that if you change directories or set environment variables, those changes will be remembered in subsequent commands. If you\u0027re not 100% sure what directory you\u0027re in, you can always check with:\r\n- \u0060bash\u0060 (Bash)\r\n- \u0060Get-Location\u0060 (Powershell)\r\n- \u0060cd\u0060 (CMD)\r\n\r\nTo get a new shell, you can use the \u0060exit\u0060 command to close all persistent shells. Your next command will re-open a new shell.\r\n\r\n### Notes on Directories\r\n1. The working directory is shell-specific. Bash shell\u0027s current directory is/can be different from Powershell or CMD shells\u0027 current directories.\r\n2. Shell-specific working directories have no impact on any tools (e.g. ListFiles, ViewView, StrReplace). These tools always use the working directory when we started this conversation.\r\n\r\n## Thinking\r\n\r\nYour thinking should be thorough, so it\u0027s fine if it\u0027s very long.\r\n\r\nBefore you take any action to change files or folders, use the **think** tool as a scratchpad to:\r\n- Consider the changes you are about to make in detail and how they will affect the codebase.\r\n- Figure out which files need to be updated. \r\n- Reflect on the changes already made and make sure they are precise and not deleting working code.\r\n\r\nHere are some examples of what to iterate over inside the think tool:\r\n\u003Cthink_tool_example_1\u003E\r\nAn issue needs to be addressed in the codebase.\r\n- Get a list of files that need to be updated. \r\n    * Find the files related to the issue.\r\n    * Read the files to get the parts that need to be updated\r\n- Build the code to see if to is buildable.\r\n- Create tests to check if the issue exists\r\n    * Check if there is an existing test that can be updated first. \r\n    * If none exists, check if there are any tests and add a new test there for this issue.\r\n    * If there are no tests, create a new test script for this issue only.\r\n- Run the test to see if it fails. \r\n- Edit the files to fix the issue. Make minimal changes to the files to fix the issue. Reason out why the change is needed and can a smaller change be made.\r\n- Build the code and fix any NEW build errors that are introduced by the changes.\r\n- Run the test you created to see if it passes. Do NOT modify any code to get any test other than the new one to pass.\r\n- Plan: \r\n1. List out the files that need to be updated\r\n2. Read the files to get the parts that need to be updated\r\n3. Build the code to see if to is buildable\r\n3. Create test\r\n4. Run the test to see if it fails\r\n5. Fix the issue. Rebuild, fix new build errors iteratively.\r\n6. Run the test to see if it passes.\r\n\u003C/think_tool_example_1\u003E\r\n\r\n\r\n"},{"role":"user","content":"please use the new process tools i\u0027ve given you to do xyz"}],"model":"claude-3.7-sonnet","stream":true,"stream_options":{"include_usage":true}}
[000005]: 672ms VERBOSE: VisionHeaderPolicy.cs:31 VisionHeaderPolicy: Processing request (async)
[000005]: 673ms VERBOSE: InteractionHeadersPolicy.cs:90 IsUserInitiatedRequest: True (lastUserRoleIndex: 37288, lastAssistantRoleIndex: -1)
[000005]: 673ms VERBOSE: InteractionHeadersPolicy.cs:53 Added X-Interaction-Id: 8d0daccc-296b-4a2c-b4b1-c3eab8ff49d3
[000005]: 673ms VERBOSE: InteractionHeadersPolicy.cs:54 Added X-Initiator: user
[000005]: 7994ms VERBOSE: ChatMessageHelpers.cs:283 User chat content size: 57, max token size: 50000, is too big: False
[000005]: 7994ms VERBOSE: ChatMessageHelpers.cs:169 Total bytes: 13918, estimated tokens: 3479, chat token target: 160000, is too big: False
[000005]: 225014ms INFO: McpFunctionFactory.cs:159 MCP: Disposing of 0 MCP clients
[000005]: 225015ms INFO: McpFunctionFactory.cs:190 MCP: All clients disposed and cleared
[000005]: 225015ms INFO: McpFunctionFactory.cs:159 MCP: Disposing of 0 MCP clients
[000005]: 225015ms INFO: McpFunctionFactory.cs:190 MCP: All clients disposed and cleared
